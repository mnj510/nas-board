# 설정 체크리스트

NAS 서버에 사이트를 구동하고 데이터를 저장하기까지 필요한 모든 단계를 확인하세요.

## ✅ 1단계: Supabase 설정

### Supabase 프로젝트 생성
- [ ] [Supabase](https://supabase.com) 계정 생성
- [ ] 새 프로젝트 생성
- [ ] 프로젝트 URL과 API 키 확인

### 데이터베이스 설정
- [ ] SQL Editor에서 `supabase-schema.sql` 실행
- [ ] `profiles` 테이블 생성 확인
- [ ] `posts` 테이블 생성 확인
- [ ] `comments` 테이블 생성 확인
- [ ] RLS 정책 적용 확인

### Storage 설정
- [ ] `images` 버킷 생성 (공개 버킷)
- [ ] 읽기 정책: 모든 사용자 허용
- [ ] 업로드 정책: 인증된 사용자만 허용

## ✅ 2단계: 로컬 개발 환경

### 프로젝트 설정
- [ ] `npm install` 실행
- [ ] `.env.local` 파일 생성
- [ ] Supabase URL과 키 입력
- [ ] `npm run dev`로 로컬 테스트

### 기능 테스트
- [ ] 회원가입 테스트
- [ ] 로그인 테스트 (mnj510@naver.com / asdf6014)
- [ ] 게시물 작성 테스트
- [ ] 이미지 업로드 테스트
- [ ] 댓글 작성 테스트
- [ ] 대댓글 작성 테스트

## ✅ 3단계: GitHub 설정

### 저장소 생성
- [ ] GitHub 저장소 생성
- [ ] 코드 푸시
- [ ] `.gitignore` 확인 (`.env.local` 제외 확인)

### GitHub Secrets 설정
- [ ] `NEXT_PUBLIC_SUPABASE_URL` 추가
- [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY` 추가
- [ ] `NAS_HOST` 추가 (192.168.219.55)
- [ ] `NAS_USERNAME` 추가 (SSH 사용자명)
- [ ] `NAS_SSH_KEY` 추가 (SSH 개인 키)
- [ ] `NAS_PORT` 추가 (기본값: 22)

## ✅ 4단계: NAS 서버 준비

### 필수 소프트웨어
- [ ] Node.js 18 이상 설치 확인
- [ ] PM2 설치 (`npm install -g pm2`)
- [ ] Git 설치 확인
- [ ] SSH 접근 가능 확인

### 디렉토리 준비
- [ ] `/volume1/web/nas-board` 디렉토리 생성
- [ ] 권한 설정 확인

## ✅ 5단계: NAS 서버 배포

### 초기 배포
- [ ] GitHub Actions 워크플로우 실행 확인
- [ ] NAS 서버에 코드 배포 확인
- [ ] `.env.local` 파일 생성 (NAS 서버에)
- [ ] 환경 변수 입력

### 앱 실행
- [ ] `npm install` 실행
- [ ] `npm run build` 실행
- [ ] PM2로 앱 시작
- [ ] PM2 자동 시작 설정

### 포트 설정
- [ ] 3000번 포트 방화벽 허용
- [ ] 리버스 프록시 설정 (선택사항)
- [ ] 5001번 포트로 접속 가능 확인

## ✅ 6단계: 최종 확인

### 기능 확인
- [ ] 사이트 접속 가능 (http://192.168.219.55:5001)
- [ ] 로그인/회원가입 작동
- [ ] 게시판 목록 표시
- [ ] 게시물 작성/수정/삭제
- [ ] 이미지 업로드 및 표시
- [ ] 댓글/대댓글 작성
- [ ] 관리자 페이지 접근
- [ ] 관리자 임명 기능
- [ ] 프로필 페이지 작동

### 모바일 확인
- [ ] 모바일에서 메뉴 표시 확인
- [ ] 반응형 디자인 확인
- [ ] 터치 인터페이스 확인

### 데이터 확인
- [ ] Supabase에 데이터 저장 확인
- [ ] 이미지가 Storage에 저장되는지 확인
- [ ] 관리자 계정으로 로그인 확인

## 문제 발생 시 확인 사항

### 배포 실패
- [ ] GitHub Actions 로그 확인
- [ ] SSH 키가 올바른지 확인
- [ ] NAS 서버 접근 가능한지 확인

### 앱 실행 안 됨
- [ ] PM2 로그 확인 (`pm2 logs nas-board`)
- [ ] 포트 충돌 확인
- [ ] 환경 변수 확인

### 데이터 저장 안 됨
- [ ] Supabase 연결 확인
- [ ] RLS 정책 확인
- [ ] 환경 변수 확인

### 이미지 표시 안 됨
- [ ] Storage 버킷 공개 설정 확인
- [ ] 이미지 URL 확인
- [ ] CORS 설정 확인

## 완료 후

모든 체크리스트를 완료했다면:
1. 관리자 계정으로 로그인
2. 테스트 게시물 작성
3. 사용자 초대 및 테스트
4. 정기적인 백업 설정 (선택사항)

